[{"id":"6d373956.f4ba38","type":"tab","label":"Flow 5","disabled":false,"info":""},{"id":"a4352b4d.7d3d18","type":"inject","z":"6d373956.f4ba38","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":2180,"wires":[["b6b7f716.b1de98","a763c1c5.89c9a","f0a3cbfe.98cae8","1de80095.325adf","18bd19ec.d48b26","b9b0c97a.11f488","3e2e613f.09939e","6e88b5d2.be33ec","61f67c63.3f0b04","79de1aed.c7cbd4","5e009c8c.f3eb74","6131828e.7cfc9c","71dab09e.65878","babfea9b.68ae48","1048ff4f.808c41","83331496.1de0b8","9034b98c.1cb958","dc2af4df.9d0cf8","a0082786.53e588","5e2860b9.7d543"]]},{"id":"fc455008.2d3fe","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-1","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\nvar device_Profile = global.get('deviceProfile_1');\nvar index = global.get('deviceProfile_1_Index');\nvar profile = device_Profile[index];\n// node.warn(profile)\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_1_ReadIndex');\nvar readValue = regAdd[readIndex];\n// node.warn(readValue)\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\n// var fc = 3\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_1', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1700,"wires":[["ad6b5bc.e7a6fa8"]]},{"id":"61f99673.b188c8","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-2","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\nvar device_profile = global.get('deviceProfile_2');\nvar index = global.get('deviceProfile_2_Index');\nvar profile = device_profile[index];\n// node.warn(profile)\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_2_ReadIndex');\nvar readValue = regAdd[readIndex];\n// node.warn(readValue)\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_2', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1752,"wires":[["c75ee4b.f48ae18"]]},{"id":"d24116a0.28fb28","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-3","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_3');\nvar index = global.get('deviceProfile_3_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_3_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_3', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1808,"wires":[["2f4e7687.50f98a"]]},{"id":"532f25c1.dcca5c","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-4","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_4');\nvar index = global.get('deviceProfile_4_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_4_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_4', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1862,"wires":[["a0f4334d.0de3a"]]},{"id":"f4d1caeb.8aa058","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-5","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_5');\nvar index = global.get('deviceProfile_5_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_5_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_5', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":1915,"wires":[["c88209f4.68e248"]]},{"id":"93b4ba69.005848","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-6","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_6');\nvar index = global.get('deviceProfile_6_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_6_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_6', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":975.7142944335938,"y":1967.8571472167969,"wires":[["eea17212.ec5bf"]]},{"id":"34bf2ea8.801c32","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-2","func":"var device_profile = global.get('deviceProfile_2');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_2_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_2_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_2_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_2_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_2_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-2')\n    // global.set('deviceProfile_2_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_2_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_2_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_2_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_2_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_2_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_2_ReadIndex', index);  \n  global.set('stop_deviceProfile_2', false);\n  global.set('stop_to_read_deviceProfile_2_dataPacket', true);\n\n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_2_dataPacket', false);\n    global.set('deviceProfile_2_ReadIndex', 0);\n    global.set(\"deviceProfile_2_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_2', true);\n    // display Data\n    displayData();\n    \n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_2_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_2_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_2_Index');\n        index += 1;\n        global.set('deviceProfile_2_Index', index);\n        global.set('stop_deviceProfile_2', true);\n        global.set('stop_to_read_deviceProfile_2_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_2_dataPacket', false);\n        global.set('stop_deviceProfile_2', false);\n        global.set('deviceProfile_2_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1662,"y":1752,"wires":[["a119df8b.fc74b"]]},{"id":"8a4fd85a.fdee58","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-3","func":"var device_profile = global.get('deviceProfile_3');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_3_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_3_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_3_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_3_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_3_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-3')\n    // global.set('deviceProfile_3_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_3_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0\n     }\n    }\n    global.set('deviceProfile_3_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_3_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_3_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_3_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_3_ReadIndex', index);  \n  global.set('stop_deviceProfile_3', false);\n  global.set('stop_to_read_deviceProfile_3_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_3_dataPacket', false);\n    global.set('deviceProfile_3_ReadIndex', 0);\n    global.set(\"deviceProfile_3_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_3', true);\n    // display Data\n    displayData();\n    \n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_3_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_3_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_3_Index');\n        index += 1;\n        global.set('deviceProfile_3_Index', index);\n        global.set('stop_deviceProfile_3', true);\n        global.set('stop_to_read_deviceProfile_3_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_3_dataPacket', false);\n        global.set('stop_deviceProfile_3', false);\n        global.set('deviceProfile_3_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1660,"y":1809,"wires":[["e2038cab.03704"]]},{"id":"406609fd.ecdaa8","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-4","func":"var device_profile = global.get('deviceProfile_4');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_4_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_4_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_4_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_4_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_4_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-4')\n    // global.set('deviceProfile_4_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_4_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_4_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_4_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_4_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_4_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_4_ReadIndex', index);  \n  global.set('stop_deviceProfile_4', false);\n  global.set('stop_to_read_deviceProfile_4_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_4_dataPacket', false);\n    global.set('deviceProfile_4_ReadIndex', 0);\n    global.set(\"deviceProfile_4_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_4', true);\n    // display Data\n    displayData();\n    \n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_4_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_4_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_4_Index');\n        index += 1;\n        global.set('deviceProfile_4_Index', index);\n        global.set('stop_deviceProfile_4', true);\n        global.set('stop_to_read_deviceProfile_4_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_4_dataPacket', false);\n        global.set('stop_deviceProfile_4', false);\n        global.set('deviceProfile_4_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1662,"y":1863,"wires":[["8749897.d55f678"]]},{"id":"cb44a203.0ee8a","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-5","func":"var device_profile = global.get('deviceProfile_5');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_5_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_5_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_5_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_5_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_5_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-5')\n    // global.set('deviceProfile_5_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_5_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_5_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_5_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_5_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_5_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_5_ReadIndex', index);  \n  global.set('stop_deviceProfile_5', false);\n  global.set('stop_to_read_deviceProfile_5_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_5_dataPacket', false);\n    global.set('deviceProfile_5_ReadIndex', 0);\n    global.set(\"deviceProfile_5_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_5', true);\n    // display Data\n    displayData();\n    \n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_5_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_5_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_5_Index');\n        index += 1;\n        global.set('deviceProfile_5_Index', index);\n        global.set('stop_deviceProfile_5', true);\n        global.set('stop_to_read_deviceProfile_5_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_5_dataPacket', false);\n        global.set('stop_deviceProfile_5', false);\n        global.set('deviceProfile_5_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1662,"y":1916,"wires":[["a53fe09e.ebc35"]]},{"id":"72bf9bf3.c82bb4","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-6","func":"var device_profile = global.get('deviceProfile_6');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_6_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_6_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_6_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_6_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_6_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-6')\n    // global.set('deviceProfile_6_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_6_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_6_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_6_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_6_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_6_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_6_ReadIndex', index);  \n  global.set('stop_deviceProfile_6', false);\n  global.set('stop_to_read_deviceProfile_6_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_6_dataPacket', false);\n    global.set('deviceProfile_6_ReadIndex', 0);\n    global.set(\"deviceProfile_6_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_6', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_6_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_6_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_6_Index');\n        index += 1;\n        global.set('deviceProfile_6_Index', index);\n        global.set('stop_deviceProfile_6', true);\n        global.set('stop_to_read_deviceProfile_6_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_6_dataPacket', false);\n        global.set('stop_deviceProfile_6', false);\n        global.set('deviceProfile_6_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1662,"y":1971,"wires":[["b8e9d82b.8d0378"]]},{"id":"1668b160.113fdf","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_1","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1877,"y":1700,"wires":[["f418b64.d342848","4503d52.9f1c32c"]]},{"id":"a119df8b.fc74b","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_2","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1878,"y":1752,"wires":[["40299223.e4524c","4503d52.9f1c32c"]]},{"id":"e2038cab.03704","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_3","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1878,"y":1809,"wires":[["7a198a6b.694f84","4503d52.9f1c32c"]]},{"id":"8749897.d55f678","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_4","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1878,"y":1863,"wires":[["6f29aeaa.c42e1","4503d52.9f1c32c"]]},{"id":"a53fe09e.ebc35","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_5","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1878,"y":1916,"wires":[["a1b143f.4c59dc","4503d52.9f1c32c"]]},{"id":"b8e9d82b.8d0378","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_6","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1880,"y":1971,"wires":[["19edf8fa.a4f3e7","4503d52.9f1c32c"]]},{"id":"23c6667c.fcd9aa","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-1","scope":["1dd4d41b.6207ec"],"uncaught":false,"x":607,"y":628,"wires":[["44ff2bc0.5cb1b4"]]},{"id":"44ff2bc0.5cb1b4","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_1","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":759,"y":628,"wires":[["fc455008.2d3fe"]]},{"id":"6bf0ad65.0d6304","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-2","scope":["34bf2ea8.801c32"],"uncaught":false,"x":607,"y":681,"wires":[["8fb3daa9.388f38"]]},{"id":"8fb3daa9.388f38","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_2","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":758,"y":681,"wires":[["61f99673.b188c8"]]},{"id":"5ba2c580.67de9c","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-3","scope":["8a4fd85a.fdee58"],"uncaught":false,"x":607,"y":733,"wires":[["d207fe0c.5b0f8"]]},{"id":"d207fe0c.5b0f8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_3","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":758,"y":733,"wires":[["d24116a0.28fb28"]]},{"id":"a3afae54.71f3d","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-4","scope":["406609fd.ecdaa8"],"uncaught":false,"x":607,"y":788,"wires":[["5823ee53.bee9f"]]},{"id":"5823ee53.bee9f","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_4","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":758,"y":788,"wires":[["532f25c1.dcca5c"]]},{"id":"8cba62ee.e0041","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-5","scope":["cb44a203.0ee8a"],"uncaught":false,"x":607,"y":841,"wires":[["20a047e9.52a228"]]},{"id":"20a047e9.52a228","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_5","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":758,"y":841,"wires":[["f4d1caeb.8aa058"]]},{"id":"3301453f.036b2a","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-6","scope":["72bf9bf3.c82bb4"],"uncaught":false,"x":607,"y":893,"wires":[["6abf62b.0f4e49c"]]},{"id":"6abf62b.0f4e49c","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_6","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":758,"y":893,"wires":[["93b4ba69.005848"]]},{"id":"2242ec30.ae48e4","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-1","scope":["1dd4d41b.6207ec"],"uncaught":false,"x":571,"y":2830,"wires":[["874e3347.c7284"]]},{"id":"874e3347.c7284","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_1_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":761,"y":2830,"wires":[["fc455008.2d3fe"]]},{"id":"ff4606b4.95d0e8","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-2","scope":["34bf2ea8.801c32"],"uncaught":false,"x":570,"y":2883,"wires":[["d4064b58.487ed8"]]},{"id":"d4064b58.487ed8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_2_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":757,"y":2883,"wires":[["61f99673.b188c8"]]},{"id":"63520690.c16bc8","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-3","scope":["8a4fd85a.fdee58"],"uncaught":false,"x":570,"y":2935,"wires":[["831c1469.0ce808"]]},{"id":"831c1469.0ce808","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_3_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":759,"y":2935,"wires":[["d24116a0.28fb28"]]},{"id":"4cc5c359.ca7d7c","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-4","scope":["406609fd.ecdaa8"],"uncaught":false,"x":570,"y":2990,"wires":[["8aa4d88b.702ba8"]]},{"id":"8aa4d88b.702ba8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_4_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":2990,"wires":[["532f25c1.dcca5c"]]},{"id":"e04a9a4c.777a78","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-5","scope":["cb44a203.0ee8a"],"uncaught":false,"x":570,"y":3043,"wires":[["5efa0c68.c9fdb4"]]},{"id":"5efa0c68.c9fdb4","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_5_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":765,"y":3043,"wires":[["f4d1caeb.8aa058"]]},{"id":"f418b64.d342848","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.141","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1694,"wires":[]},{"id":"40299223.e4524c","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.144","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1740,"wires":[]},{"id":"7a198a6b.694f84","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.146","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1800,"wires":[]},{"id":"6f29aeaa.c42e1","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.148","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1860,"wires":[]},{"id":"a1b143f.4c59dc","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.150","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1920,"wires":[]},{"id":"19edf8fa.a4f3e7","type":"debug","z":"6d373956.f4ba38","name":"10.102.255.152","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2081,"y":1969,"wires":[]},{"id":"18925e17.b0e3f2","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-6","scope":["72bf9bf3.c82bb4"],"uncaught":false,"x":570,"y":3095,"wires":[["f64ef3ee.6c5c8"]]},{"id":"f64ef3ee.6c5c8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_6_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":3095,"wires":[["93b4ba69.005848"]]},{"id":"a5538097.7960f","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-7","scope":["a2612968.29b8e8"],"uncaught":false,"x":569,"y":3147,"wires":[["27c8d2ea.83478e"]]},{"id":"27c8d2ea.83478e","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_7_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3147,"wires":[["94262519.e5ba68"]]},{"id":"6d1595df.aff82c","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-8","scope":["22a8e496.42381c"],"uncaught":false,"x":568,"y":3200,"wires":[["37b84efb.92a122"]]},{"id":"37b84efb.92a122","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_8_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":3200,"wires":[["e640d2dc.ce6d2"]]},{"id":"7c02ca4d.e27594","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-9","scope":["1989cb33.670385"],"uncaught":false,"x":568,"y":3252,"wires":[["a80275c7.c9a6e8"]]},{"id":"a80275c7.c9a6e8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_9_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":3252,"wires":[["873081eb.256dc"]]},{"id":"10725b89.d4a9f4","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-10","scope":["a49af13f.d2eb2"],"uncaught":false,"x":568,"y":3307,"wires":[["20f7f75.fc0a808"]]},{"id":"20f7f75.fc0a808","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_10_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":3307,"wires":[["bbe481b5.6ddfb"]]},{"id":"d2053181.1e335","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-11","scope":["853fd470.d421d8"],"uncaught":false,"x":568,"y":3360,"wires":[["bb9220d7.747a"]]},{"id":"bb9220d7.747a","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_11_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3360,"wires":[["dbfca5ce.757af8"]]},{"id":"c35a9755.d80b28","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-12","scope":["ce0dd3df.83bef"],"uncaught":false,"x":568,"y":3412,"wires":[["5b495847.a85dc8"]]},{"id":"5b495847.a85dc8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_12_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":761,"y":3412,"wires":[["ca7b8954.fcbe98"]]},{"id":"90cf0a12.284328","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-7","scope":["a2612968.29b8e8"],"uncaught":false,"x":607,"y":948,"wires":[["c685e01a.41297"]]},{"id":"c685e01a.41297","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_7","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":761,"y":948,"wires":[["94262519.e5ba68"]]},{"id":"6c6fe474.dddaec","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-8","scope":["22a8e496.42381c"],"uncaught":false,"x":607,"y":1001,"wires":[["2121f52.ee8a80a"]]},{"id":"2121f52.ee8a80a","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_8","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":763,"y":1001,"wires":[["e640d2dc.ce6d2"]]},{"id":"70d8e23d.d9835c","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-9","scope":["1989cb33.670385"],"uncaught":false,"x":607,"y":1053,"wires":[["ddb97d5f.09b91"]]},{"id":"ddb97d5f.09b91","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_9","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1053,"wires":[["873081eb.256dc"]]},{"id":"b8a1c82b.c761c8","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-10","scope":["a49af13f.d2eb2"],"uncaught":false,"x":607,"y":1108,"wires":[["afecf396.38fb9"]]},{"id":"afecf396.38fb9","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_10","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1108,"wires":[["bbe481b5.6ddfb"]]},{"id":"904e570e.768018","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-11","scope":["853fd470.d421d8"],"uncaught":false,"x":607,"y":1161,"wires":[["93e6f958.f49d68"]]},{"id":"93e6f958.f49d68","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_11","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1161,"wires":[["dbfca5ce.757af8"]]},{"id":"4a63c0f.188114","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-12","scope":["ce0dd3df.83bef"],"uncaught":false,"x":607,"y":1213,"wires":[["1c3ce517.dc9adb"]]},{"id":"1c3ce517.dc9adb","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_12","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1213,"wires":[["ca7b8954.fcbe98"]]},{"id":"94262519.e5ba68","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-7","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_7');\nvar index = global.get('deviceProfile_7_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_7_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_7', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":2022,"wires":[["b287b929.971c08"]]},{"id":"e640d2dc.ce6d2","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-8","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_8');\nvar index = global.get('deviceProfile_8_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_8_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_8', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":2074,"wires":[["6c6dbc61.2a4504"]]},{"id":"873081eb.256dc","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-9","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_9');\nvar index = global.get('deviceProfile_9_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_9_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_9', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":2130,"wires":[["b5825cd7.1aeb8"]]},{"id":"bbe481b5.6ddfb","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-10","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_10');\nvar index = global.get('deviceProfile_10_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_10_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_10', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":990,"y":2183,"wires":[["7406b35c.5e77ac"]]},{"id":"dbfca5ce.757af8","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-11","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_11');\nvar index = global.get('deviceProfile_11_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_11_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_11', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":2235,"wires":[["f690c46e.3205a8"]]},{"id":"ca7b8954.fcbe98","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-12","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_12');\nvar index = global.get('deviceProfile_12_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_12_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_12', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":985.7142944335938,"y":2289.857147216797,"wires":[["88c60a15.17b298"]]},{"id":"a2612968.29b8e8","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-7","func":"var device_profile = global.get('deviceProfile_7');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_7_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_7_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_7_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_7_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_7_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-7')\n    // global.set('deviceProfile_7_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_7_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_7_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_7_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_7_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_7_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_7_ReadIndex', index);  \n  global.set('stop_deviceProfile_7', false);\n  global.set('stop_to_read_deviceProfile_7_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_7_dataPacket', false);\n    global.set('deviceProfile_7_ReadIndex', 0);\n    global.set(\"deviceProfile_7_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_7', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_7_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_7_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_7_Index');\n        index += 1;\n        global.set('deviceProfile_7_Index', index);\n        global.set('stop_deviceProfile_7', true);\n        global.set('stop_to_read_deviceProfile_7_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_7_dataPacket', false);\n        global.set('stop_deviceProfile_7', false);\n        global.set('deviceProfile_7_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1659,"y":2021,"wires":[["ddcf5849.f91f98"]]},{"id":"22a8e496.42381c","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-8","func":"var device_profile = global.get('deviceProfile_8');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_8_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_8_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_8_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_8_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_8_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-8')\n    // global.set('deviceProfile_8_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_8_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_8_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_8_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_8_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_8_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_8_ReadIndex', index);  \n  global.set('stop_deviceProfile_8', false);\n  global.set('stop_to_read_deviceProfile_8_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_8_dataPacket', false);\n    global.set('deviceProfile_8_ReadIndex', 0);\n    global.set(\"deviceProfile_8_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_8', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_8_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_8_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_8_Index');\n        index += 1;\n        global.set('deviceProfile_8_Index', index);\n        global.set('stop_deviceProfile_8', true);\n        global.set('stop_to_read_deviceProfile_8_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_8_dataPacket', false);\n        global.set('stop_deviceProfile_8', false);\n        global.set('deviceProfile_8_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1661,"y":2074,"wires":[["ef90c3.d6a4cf4"]]},{"id":"1989cb33.670385","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-9","func":"var device_profile = global.get('deviceProfile_9');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_9_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_9_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_9_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_9_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_9_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-9')\n    // global.set('deviceProfile_9_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_9_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0\n     }\n    }\n    // global.set('ip141_Data', msg.payloadData);\n    \n    global.set('deviceProfile_9_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_9_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_9_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_9_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_9_ReadIndex', index);  \n  global.set('stop_deviceProfile_9', false);\n  global.set('stop_to_read_deviceProfile_9_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_9_dataPacket', false);\n    global.set('deviceProfile_9_ReadIndex', 0);\n    global.set(\"deviceProfile_9_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_9', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_9_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_9_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_9_Index');\n        index += 1;\n        global.set('deviceProfile_9_Index', index);\n        global.set('stop_deviceProfile_9', true);\n        global.set('stop_to_read_deviceProfile_9_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_9_dataPacket', false);\n        global.set('stop_deviceProfile_9', false);\n        global.set('deviceProfile_9_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1659,"y":2129,"wires":[["14ccef94.c3c62"]]},{"id":"a49af13f.d2eb2","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-10","func":"var device_profile = global.get('deviceProfile_10');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_10_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_10_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_10_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_10_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_10_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-10')\n    // global.set('deviceProfile_10_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_10_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    // global.set('ip142_Data',  msg.payloadData);\n    \n    global.set('deviceProfile_10_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_10_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_10_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_10_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_10_ReadIndex', index);  \n  global.set('stop_deviceProfile_10', false);\n  global.set('stop_to_read_deviceProfile_10_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_10_dataPacket', false);\n    global.set('deviceProfile_10_ReadIndex', 0);\n    global.set(\"deviceProfile_10_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_10', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_10_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_10_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_10_Index');\n        index += 1;\n        global.set('deviceProfile_10_Index', index);\n        global.set('stop_deviceProfile_10', true);\n        global.set('stop_to_read_deviceProfile_10_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_10_dataPacket', false);\n        global.set('stop_deviceProfile_10', false);\n        global.set('deviceProfile_10_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1671,"y":2183,"wires":[["2177fa6b.87a656"]]},{"id":"853fd470.d421d8","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-11","func":"//  let data = global.get('ip141_Data');\n// msg.payloadData = data;\n// // node.warn('----1')\n// msg.payloadData.request.DeviceNo = 11;\n// // msg.payloadData = msg.payloadData;\n// global.set('send_Data_deviceProfile_11', true);\n// return msg;\n\n\nvar device_profile = global.get('deviceProfile_11');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_11_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_11_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_11_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_11_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_11_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-11')\n    // global.set('deviceProfile_11_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_11_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_11_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_11_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_11_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_11_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_11_ReadIndex', index);  \n  global.set('stop_deviceProfile_11', false);\n  global.set('stop_to_read_deviceProfile_11_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_11_dataPacket', false);\n    global.set('deviceProfile_11_ReadIndex', 0);\n    global.set(\"deviceProfile_11_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_11', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_11_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_11_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_11_Index');\n        index += 1;\n        global.set('deviceProfile_11_Index', index);\n        global.set('stop_deviceProfile_11', true);\n        global.set('stop_to_read_deviceProfile_11_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_11_dataPacket', false);\n        global.set('stop_deviceProfile_11', false);\n        global.set('deviceProfile_11_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1661,"y":2235,"wires":[["c3f7bdec.d56dc"]]},{"id":"ce0dd3df.83bef","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-12","func":"//  let data = global.get('ip142_Data');\n// msg.payloadData = data;\n// // node.warn('----1')\n// msg.payloadData.request.DeviceNo = 12;\n// // msg.payloadData = msg.payloadData;\n// global.set('send_Data_deviceProfile_12', true);\n// return msg;\n\n\nvar device_profile = global.get('deviceProfile_12');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_12_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_12_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_12_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_12_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_12_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-12')\n    // global.set('deviceProfile_12_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_12_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_12_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_12_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_12_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_12_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_12_ReadIndex', index);  \n  global.set('stop_deviceProfile_12', false);\n  global.set('stop_to_read_deviceProfile_12_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_12_dataPacket', false);\n    global.set('deviceProfile_12_ReadIndex', 0);\n    global.set(\"deviceProfile_12_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_12', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_12_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_12_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_12_Index');\n        index += 1;\n        global.set('deviceProfile_12_Index', index);\n        global.set('stop_deviceProfile_12', true);\n        global.set('stop_to_read_deviceProfile_12_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_12_dataPacket', false);\n        global.set('stop_deviceProfile_12', false);\n        global.set('deviceProfile_12_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1671,"y":2290,"wires":[["6a718112.78fe4"]]},{"id":"ddcf5849.f91f98","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_7","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1881,"y":2020.4285888671875,"wires":[["a33dd415.d43a88","4503d52.9f1c32c"]]},{"id":"ef90c3.d6a4cf4","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_8","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882,"y":2073.4285888671875,"wires":[["ee06224e.a6216","4503d52.9f1c32c"]]},{"id":"14ccef94.c3c62","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_9","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882,"y":2128.4285888671875,"wires":[["5cfb8424.23ae2c","4503d52.9f1c32c"]]},{"id":"2177fa6b.87a656","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_10","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882,"y":2183.4285888671875,"wires":[["657c49af.9df108","4503d52.9f1c32c"]]},{"id":"c3f7bdec.d56dc","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_11","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882,"y":2235.4285888671875,"wires":[["f40c2f9b.23f16","4503d52.9f1c32c"]]},{"id":"6a718112.78fe4","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_12","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1884,"y":2290.4285888671875,"wires":[["2323cf65.849fd","4503d52.9f1c32c"]]},{"id":"a33dd415.d43a88","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2018,"wires":[]},{"id":"ee06224e.a6216","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.145","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2069,"wires":[]},{"id":"5cfb8424.23ae2c","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.143","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2125,"wires":[]},{"id":"657c49af.9df108","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.144","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2185,"wires":[]},{"id":"f40c2f9b.23f16","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.141","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2245,"wires":[]},{"id":"2323cf65.849fd","type":"debug","z":"6d373956.f4ba38","name":"10.105.255.142","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2076,"y":2294,"wires":[]},{"id":"ad6b5bc.e7a6fa8","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.141","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"538223ac.ea03cc","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1198,"y":1701,"wires":[["298d2937.36f7e6"],[]]},{"id":"c75ee4b.f48ae18","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.144","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"7b81d68a.ee2498","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1198,"y":1753,"wires":[["8edc10db.e1026"],[]]},{"id":"a0f4334d.0de3a","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.148","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"17d1c480.8c78bc","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1198,"y":1863,"wires":[["1f96e623.ecc44a"],[]]},{"id":"4503d52.9f1c32c","type":"change","z":"6d373956.f4ba38","name":"","rules":[{"t":"set","p":"deviceType","pt":"msg","to":"payloadData.request.DeviceType","tot":"msg"},{"t":"set","p":"deviceNo","pt":"msg","to":"payloadData.request.DeviceNo","tot":"msg"},{"t":"set","p":"errFlag","pt":"msg","to":"payloadData.request.Error","tot":"msg"},{"t":"set","p":"timeStamp","pt":"msg","to":"payloadData.request.TimeStamp","tot":"msg"},{"t":"set","p":"data","pt":"msg","to":"payloadData.request.Data","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2047,"y":1369,"wires":[["785b95ba.87384c"]]},{"id":"785b95ba.87384c","type":"http request","z":"6d373956.f4ba38","name":"","method":"POST","ret":"txt","paytoqs":"ignore","url":"http://10.106.11.127/beta/rms/api/insertData?LD=1,172,{{{deviceType}}},{{{deviceNo}}},{{{errFlag}}},{{{timeStamp}}}&ID={{{data}}}","tls":"","persist":false,"proxy":"","authType":"","x":2238,"y":1369,"wires":[["cae6a76e.0f7c88"]]},{"id":"cae6a76e.0f7c88","type":"debug","z":"6d373956.f4ba38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2140,"y":1413,"wires":[]},{"id":"298d2937.36f7e6","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1699,"wires":[["1dd4d41b.6207ec"]]},{"id":"8edc10db.e1026","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1752,"wires":[["34bf2ea8.801c32"]]},{"id":"80ccdc4f.ba9f7","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1809,"wires":[["8a4fd85a.fdee58"]]},{"id":"1f96e623.ecc44a","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1863,"wires":[["406609fd.ecdaa8"]]},{"id":"180f030f.92de8d","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1970,"wires":[["72bf9bf3.c82bb4"]]},{"id":"5bea405.48c71c","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399,"y":1915,"wires":[["cb44a203.0ee8a"]]},{"id":"ca12fdaf.7c95f","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2021,"wires":[["a2612968.29b8e8"]]},{"id":"8f67a482.07cde8","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2074,"wires":[["22a8e496.42381c"]]},{"id":"790dac79.78a1e4","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2129,"wires":[["1989cb33.670385"]]},{"id":"1bc83fdc.28cfd","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2183,"wires":[["a49af13f.d2eb2"]]},{"id":"ed7fcf1f.875be","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2290,"wires":[["ce0dd3df.83bef"]]},{"id":"a884babc.bddd78","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1404,"y":2235,"wires":[["853fd470.d421d8"]]},{"id":"a763c1c5.89c9a","type":"function","z":"6d373956.f4ba38","name":"Dp-1 || RP/B/INV1, RP/B/M1, RP/C/M1","func":"var deviceProfile_1 = [\n   {\n        deviceName: \"Inverter-1\",\n        deviceProfile: {\n            deviceNo: 1,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 3,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-1\",\n        deviceProfile: {\n            deviceNo: 1,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-2\",\n        deviceProfile: {\n            deviceNo: 2,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 2,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_1', deviceProfile_1);\nglobal.set('deviceProfile_1_Index', 0);\nglobal.set('deviceProfile_1_ReadIndex', 0);\nglobal.set('deviceProfile_1_StoreData', []);\nglobal.set(\"deviceProfile_1_Count\", 0);\nglobal.set(\"deviceProfile_1_dataPacket_Count\", null);\n// node.warn(deviceProfile_1)\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":677,"y":1694,"wires":[["fc455008.2d3fe"]]},{"id":"f0a3cbfe.98cae8","type":"function","z":"6d373956.f4ba38","name":"Dp-2 || RP/C/INV1, RP/C/M2","func":"var deviceProfile_2 = [\n    {\n        deviceName: \"Inverter-2\",\n        deviceProfile: {\n            deviceNo: 2,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-3\",\n        deviceProfile: {\n            deviceNo: 3,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_2', deviceProfile_2);\nglobal.set('deviceProfile_2_Index', 0);\nglobal.set('deviceProfile_2_ReadIndex', 0);\nglobal.set('deviceProfile_2_StoreData', []);\nglobal.set(\"deviceProfile_2_Count\", 0); \nglobal.set(\"deviceProfile_2_dataPacket_Count\", null);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":647,"y":1746,"wires":[["61f99673.b188c8"]]},{"id":"1de80095.325adf","type":"function","z":"6d373956.f4ba38","name":"Dp-3 INV-3, MET-4","func":"var deviceProfile_3 = [\n    {\n        deviceName: \"Inverter-3\",\n        deviceProfile: {\n            deviceNo: 3,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-4\",\n        deviceProfile: {\n            deviceNo: 4,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_3', deviceProfile_3);\nglobal.set('deviceProfile_3_Index', 0);\nglobal.set('deviceProfile_3_ReadIndex', 0);\nglobal.set('deviceProfile_3_StoreData', []); \nglobal.set(\"deviceProfile_3_Count\", 0);\nglobal.set(\"deviceProfile_3_dataPacket_Count\", null);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":617,"y":1800,"wires":[["d24116a0.28fb28"]]},{"id":"18bd19ec.d48b26","type":"function","z":"6d373956.f4ba38","name":"DP-4 INV-4, MET-5","func":"var deviceProfile_4 = [\n    {\n        deviceName: \"Inverter-4\",\n        deviceProfile: {\n            deviceNo: 4,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-5\",\n        deviceProfile: {\n            deviceNo: 5,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_4', deviceProfile_4);\nglobal.set('deviceProfile_4_Index', 0);\nglobal.set('deviceProfile_4_ReadIndex', 0);\nglobal.set('deviceProfile_4_StoreData', []);  \nglobal.set(\"deviceProfile_4_Count\", 0);\nglobal.set(\"deviceProfile_4_dataPacket_Count\", null);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":617,"y":1853,"wires":[["532f25c1.dcca5c"]]},{"id":"b9b0c97a.11f488","type":"function","z":"6d373956.f4ba38","name":"Dp-5 INV-5, MET-6","func":"var deviceProfile_5 = [\n    {\n        deviceName: \"Inverter-5\",\n        deviceProfile: {\n            deviceNo: 5,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-6\",\n        deviceProfile: {\n            deviceNo: 6,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_5', deviceProfile_5);\nglobal.set('deviceProfile_5_Index', 0);\nglobal.set('deviceProfile_5_ReadIndex', 0);\nglobal.set('deviceProfile_5_StoreData', []); \nglobal.set(\"deviceProfile_5_Count\", 0);\nglobal.set(\"deviceProfile_5_dataPacket_Count\", null);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":617,"y":1906,"wires":[["f4d1caeb.8aa058"]]},{"id":"3e2e613f.09939e","type":"function","z":"6d373956.f4ba38","name":"Dp-6 INV-6, MET-7","func":"var deviceProfile_6 = [\n    {\n        deviceName: \"Inverter-6\",\n        deviceProfile: {\n            deviceNo: 6,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-7\",\n        deviceProfile: {\n            deviceNo: 7,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_6', deviceProfile_6);\nglobal.set('deviceProfile_6_Index', 0);\nglobal.set('deviceProfile_6_ReadIndex', 0);\nglobal.set('deviceProfile_6_StoreData', []);  \nglobal.set(\"deviceProfile_6_Count\", 0);\nglobal.set(\"deviceProfile_6_dataPacket_Count\", null);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":617,"y":1960,"wires":[["93b4ba69.005848"]]},{"id":"6e88b5d2.be33ec","type":"function","z":"6d373956.f4ba38","name":"Dp-7 INV-7","func":"var deviceProfile_7 = [\n    {\n        deviceName: \"Inverter-7\",\n        deviceProfile: {\n            deviceNo: 7,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_7', deviceProfile_7);\nglobal.set('deviceProfile_7_Index', 0);\nglobal.set('deviceProfile_7_ReadIndex', 0);\nglobal.set('deviceProfile_7_StoreData', []);\nglobal.set(\"deviceProfile_7_Count\", 0);\nglobal.set(\"deviceProfile_7_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":598,"y":2014,"wires":[["94262519.e5ba68"]]},{"id":"61f67c63.3f0b04","type":"function","z":"6d373956.f4ba38","name":"Dp-8 INV-8","func":"var deviceProfile_8 = [\n   {\n        deviceName: \"Inverter-8\",\n        deviceProfile: {\n            deviceNo: 8,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_8', deviceProfile_8);\nglobal.set('deviceProfile_8_Index', 0);\nglobal.set('deviceProfile_8_ReadIndex', 0);\nglobal.set('deviceProfile_8_StoreData', []);\nglobal.set(\"deviceProfile_8_Count\", 0);\nglobal.set(\"deviceProfile_8_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":598,"y":2067,"wires":[["e640d2dc.ce6d2"]]},{"id":"79de1aed.c7cbd4","type":"function","z":"6d373956.f4ba38","name":"Dp-9 INV-9","func":"var deviceProfile_9 = [\n    {\n        deviceName: \"Inverter-9\",\n        deviceProfile: {\n            deviceNo: 9,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_9', deviceProfile_9);\nglobal.set('deviceProfile_9_Index', 0);\nglobal.set('deviceProfile_9_ReadIndex', 0);\nglobal.set('deviceProfile_9_StoreData', []);  \nglobal.set(\"deviceProfile_9_Count\", 0);\nglobal.set(\"deviceProfile_9_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":598,"y":2121,"wires":[["873081eb.256dc"]]},{"id":"5e009c8c.f3eb74","type":"function","z":"6d373956.f4ba38","name":"Dp-10 INV-10","func":"var deviceProfile_10 = [\n   {\n        deviceName: \"Inverter-10\",\n        deviceProfile: {\n            deviceNo: 10,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_10', deviceProfile_10);\nglobal.set('deviceProfile_10_Index', 0);\nglobal.set('deviceProfile_10_ReadIndex', 0);\nglobal.set('deviceProfile_10_StoreData', []);  \nglobal.set(\"deviceProfile_10_Count\", 0);\nglobal.set(\"deviceProfile_10_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":608,"y":2174,"wires":[["bbe481b5.6ddfb"]]},{"id":"6131828e.7cfc9c","type":"function","z":"6d373956.f4ba38","name":"Dp-11 INV-11","func":"var deviceProfile_11 = [\n    {\n        deviceName: \"Inverter-11\",\n        deviceProfile: {\n            deviceNo: 11,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_11', deviceProfile_11);\nglobal.set('deviceProfile_11_Index', 0);\nglobal.set('deviceProfile_11_ReadIndex', 0);\nglobal.set('deviceProfile_11_StoreData', []);  \nglobal.set(\"deviceProfile_11_Count\", 0);\nglobal.set(\"deviceProfile_11_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":598,"y":2227,"wires":[["dbfca5ce.757af8"]]},{"id":"71dab09e.65878","type":"function","z":"6d373956.f4ba38","name":"Dp-12 INV-12, MET-8","func":"var deviceProfile_12 = [\n    {\n        deviceName: \"Inverter-12\",\n        deviceProfile: {\n            deviceNo: 12,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-8\",\n        deviceProfile: {\n            deviceNo: 8,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_12', deviceProfile_12);\nglobal.set('deviceProfile_12_Index', 0);\nglobal.set('deviceProfile_12_ReadIndex', 0);\nglobal.set('deviceProfile_12_StoreData', []);  \nglobal.set(\"deviceProfile_12_Count\", 0);\nglobal.set(\"deviceProfile_12_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":628,"y":2281,"wires":[["ca7b8954.fcbe98"]]},{"id":"1dd4d41b.6207ec","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-1","func":"var device_profile = global.get('deviceProfile_1');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_1_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_1_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_1_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_1_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_1_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-1')\n    // global.set('deviceProfile_1_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_1_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n        \"DataLength\": data.length\n     }\n    }\n    global.set('deviceProfile_1_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_1_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_1_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_1_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_1_ReadIndex', index);  \n  global.set('stop_deviceProfile_1', false);\n  global.set('stop_to_read_deviceProfile_1_dataPacket', true);\n\n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_1_dataPacket', false);\n    global.set('deviceProfile_1_ReadIndex', 0);\n    global.set(\"deviceProfile_1_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_1', true);\n    // display Data\n    displayData();\n    \n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_1_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_1_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_1_Index');\n        index += 1;\n        global.set('deviceProfile_1_Index', index);\n        global.set('stop_deviceProfile_1', true);\n        global.set('stop_to_read_deviceProfile_1_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_1_dataPacket', false);\n        global.set('stop_deviceProfile_1', false);\n        global.set('deviceProfile_1_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1658,"y":1699,"wires":[["1668b160.113fdf"]]},{"id":"2f4e7687.50f98a","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.146","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"7e9a1c26.15d7d4","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1199.71435546875,"y":1806.2857055664062,"wires":[["80ccdc4f.ba9f7"],[]]},{"id":"c88209f4.68e248","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.150","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"a94cac8.b3b775","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1205.2857666015625,"y":1915.4285888671875,"wires":[["5bea405.48c71c"],[]]},{"id":"eea17212.ec5bf","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.102.255.152","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"3996929b.f7665e","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1203,"y":1968,"wires":[["180f030f.92de8d"],[]]},{"id":"b287b929.971c08","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"a7a0bf29.9e5d3","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1203,"y":2021,"wires":[["ca12fdaf.7c95f"],[]]},{"id":"6c6dbc61.2a4504","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.145","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"7a5a15c9.5e947c","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1202.142822265625,"y":2075.4285888671875,"wires":[["8f67a482.07cde8"],[]]},{"id":"b5825cd7.1aeb8","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.143","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"140c0f94.d98b1","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1204,"y":2130,"wires":[["790dac79.78a1e4"],[]]},{"id":"7406b35c.5e77ac","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.144","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"e518cd16.b8a7f","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207.71435546875,"y":2182.71435546875,"wires":[["1bc83fdc.28cfd"],[]]},{"id":"f690c46e.3205a8","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.141","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"f3b85fd.4f440a","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1208,"y":2233.5714111328125,"wires":[["a884babc.bddd78"],[]]},{"id":"88c60a15.17b298","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.105.255.142","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"8f1f6cca.e982f","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207.5714111328125,"y":2290,"wires":[["ed7fcf1f.875be"],[]]},{"id":"ab021baa.fed398","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-13","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_13');\nvar index = global.get('deviceProfile_13_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_13_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_13', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":984,"y":2349,"wires":[["ded21cac.ad71e"]]},{"id":"3c6ec840.1921c8","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-13","func":"var device_profile = global.get('deviceProfile_13');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_13_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_13_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_13_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_13_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_13_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-13')\n    // global.set('deviceProfile_13_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_13_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_13_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_13_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_13_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_13_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_13_ReadIndex', index);  \n  global.set('stop_deviceProfile_13', false);\n  global.set('stop_to_read_deviceProfile_13_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_13_dataPacket', false);\n    global.set('deviceProfile_13_ReadIndex', 0);\n    global.set(\"deviceProfile_13_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_13', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_13_Count\");\n    deviceCount += 1;\n    global.set('deviceProfile_13_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_13_Index');\n        index += 1;\n        global.set('deviceProfile_13_Index', index);\n        global.set('stop_deviceProfile_13', true);\n        global.set('stop_to_read_deviceProfile_13_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_13_dataPacket', false);\n        global.set('stop_deviceProfile_13', false);\n        global.set('deviceProfile_13_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1669.2857055664062,"y":2349.142852783203,"wires":[["dfca6891.6e1708"]]},{"id":"dfca6891.6e1708","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_13","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882.2857055664062,"y":2349.5714416503906,"wires":[["c505b64d.7dc848","4503d52.9f1c32c"]]},{"id":"c505b64d.7dc848","type":"debug","z":"6d373956.f4ba38","name":"10.117.127.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2074.2857055664062,"y":2353.142852783203,"wires":[]},{"id":"322b9052.965c2","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1402.2857055664062,"y":2349.142852783203,"wires":[["3c6ec840.1921c8"]]},{"id":"babfea9b.68ae48","type":"function","z":"6d373956.f4ba38","name":"Dp-13 INV-13, MET-9","func":"var deviceProfile_13 = [\n     {\n        deviceName: \"Inverter-13\",\n        deviceProfile: {\n            deviceNo: 13,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 3,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-9\",\n        deviceProfile: {\n            deviceNo: 9,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_13', deviceProfile_13);\nglobal.set('deviceProfile_13_Index', 0);\nglobal.set('deviceProfile_13_ReadIndex', 0);\nglobal.set('deviceProfile_13_StoreData', []);  \nglobal.set(\"deviceProfile_13_Count\", 0);\nglobal.set(\"deviceProfile_13_dataPacket_Count\", null);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":627.2857055664062,"y":2339.142852783203,"wires":[["ab021baa.fed398"]]},{"id":"ded21cac.ad71e","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.117.127.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"45866b8b.fffea4","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1205.8571166992188,"y":2349.142852783203,"wires":[["322b9052.965c2"],[]]},{"id":"e5821f03.fa344","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-14","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_14');\nvar index = global.get('deviceProfile_14_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_14_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_14', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":985,"y":2405,"wires":[["3373eefa.a1c3d2"]]},{"id":"88062b67.246488","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-14","func":"var device_profile = global.get('deviceProfile_14');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_14_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_14_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_14_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_14_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_14_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-14')\n    // global.set('deviceProfile_14_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_14_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_14_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_14_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_14_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_14_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_14_ReadIndex', index);  \n  global.set('stop_deviceProfile_14', false);\n  global.set('stop_to_read_deviceProfile_14_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_14_dataPacket', false);\n    global.set('deviceProfile_14_ReadIndex', 0);\n    global.set(\"deviceProfile_14_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_14', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_14_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_14_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_14_Index');\n        index += 1;\n        global.set('deviceProfile_14_Index', index);\n        global.set('stop_deviceProfile_14', true);\n        global.set('stop_to_read_deviceProfile_14_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_14_dataPacket', false);\n        global.set('stop_deviceProfile_14', false);\n        global.set('deviceProfile_14_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1670.2857055664062,"y":2405.142852783203,"wires":[["1eec8d9.d3a5e72"]]},{"id":"1eec8d9.d3a5e72","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_14","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1883.2857055664062,"y":2405.5714416503906,"wires":[["69eb53c0.9dfdbc","4503d52.9f1c32c"]]},{"id":"69eb53c0.9dfdbc","type":"debug","z":"6d373956.f4ba38","name":"10.117.127.141","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2075.2857055664062,"y":2409.142852783203,"wires":[]},{"id":"b0273bb0.950228","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1403.2857055664062,"y":2405.142852783203,"wires":[["88062b67.246488"]]},{"id":"1048ff4f.808c41","type":"function","z":"6d373956.f4ba38","name":"Dp-14 INV-14, INV-15, MET-10, MET-11","func":"var deviceProfile_14 = [\n   {\n        deviceName: \"Inverter-14\",\n        deviceProfile: {\n            deviceNo: 14,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Inverter-15\",\n        deviceProfile: {\n            deviceNo: 15,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-10\",\n        deviceProfile: {\n            deviceNo: 10,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 3,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-11\",\n        deviceProfile: {\n            deviceNo: 11,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 4,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_14', deviceProfile_14);\nglobal.set('deviceProfile_14_Index', 0);\nglobal.set('deviceProfile_14_ReadIndex', 0);\nglobal.set('deviceProfile_14_StoreData', []);  \nglobal.set(\"deviceProfile_14_Count\", 0);\nglobal.set(\"deviceProfile_14_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":648.2857055664062,"y":2404.142852783203,"wires":[["e5821f03.fa344"]]},{"id":"6babb42.2c4284c","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-13","scope":["3c6ec840.1921c8"],"uncaught":false,"x":567,"y":3460,"wires":[["ff6091d3.265cb"]]},{"id":"ff6091d3.265cb","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_13_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3460,"wires":[["ab021baa.fed398"]]},{"id":"d8c63442.5ffdc8","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-14","scope":["88062b67.246488"],"uncaught":false,"x":567,"y":3513,"wires":[["842e1147.8d205"]]},{"id":"842e1147.8d205","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_14_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3513,"wires":[["e5821f03.fa344"]]},{"id":"7ca31841.198308","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-13","scope":["3c6ec840.1921c8"],"uncaught":false,"x":609,"y":1262,"wires":[["c535f1.8fbc1a1"]]},{"id":"c535f1.8fbc1a1","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_13","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":763,"y":1262,"wires":[["ab021baa.fed398"]]},{"id":"5a2f464d.387c48","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-14","scope":["88062b67.246488"],"uncaught":false,"x":609,"y":1311,"wires":[["15b6149f.a2de6b"]]},{"id":"15b6149f.a2de6b","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_14","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1311,"wires":[["e5821f03.fa344"]]},{"id":"3373eefa.a1c3d2","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.117.127.141","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"3ee03be9.b3d3a4","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207,"y":2410,"wires":[["b0273bb0.950228"],[]]},{"id":"b4dac724.898188","type":"catch","z":"6d373956.f4ba38","name":"","scope":null,"uncaught":false,"x":120,"y":84,"wires":[["a18ba630.f14ea8","649ec4c.729573c"]]},{"id":"8d6e0e16.015a5","type":"switch","z":"6d373956.f4ba38","name":"","property":"error_Status","propertyType":"msg","rules":[{"t":"eq","v":"retry","vt":"str"},{"t":"eq","v":"moveOnNextDevice","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":130,"y":171,"wires":[["22dc6c37.ae9784"],["c50a7f97.fb913"]]},{"id":"22dc6c37.ae9784","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"1000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":360,"y":139,"wires":[["6d127308.ef2fec"]]},{"id":"2c365907.dca386","type":"switch","z":"6d373956.f4ba38","name":"","property":"retry_or_moveOnNextDevice","propertyType":"msg","rules":[{"t":"eq","v":"RD_Profile1","vt":"str"},{"t":"eq","v":"RD_Profile2","vt":"str"},{"t":"eq","v":"RD_Profile3","vt":"str"},{"t":"eq","v":"RD_Profile4","vt":"str"},{"t":"eq","v":"RD_Profile5","vt":"str"},{"t":"eq","v":"RD_Profile6","vt":"str"},{"t":"eq","v":"RD_Profile7","vt":"str"},{"t":"eq","v":"RD_Profile8","vt":"str"},{"t":"eq","v":"RD_Profile9","vt":"str"},{"t":"eq","v":"RD_Profile10","vt":"str"},{"t":"eq","v":"RD_Profile11","vt":"str"},{"t":"eq","v":"RD_Profile12","vt":"str"},{"t":"eq","v":"RD_Profile13","vt":"str"},{"t":"eq","v":"RD_Profile14","vt":"str"},{"t":"eq","v":"RD_Profile15","vt":"str"},{"t":"eq","v":"RD_Profile16","vt":"str"},{"t":"eq","v":"RD_Profile17","vt":"str"},{"t":"eq","v":"RD_Profile18","vt":"str"},{"t":"eq","v":"RD_Profile19","vt":"str"},{"t":"eq","v":"RD_Profile20","vt":"str"}],"checkall":"true","repair":false,"outputs":20,"x":770,"y":260,"wires":[["fc455008.2d3fe"],["61f99673.b188c8"],["d24116a0.28fb28"],["532f25c1.dcca5c"],["f4d1caeb.8aa058"],["93b4ba69.005848"],["94262519.e5ba68"],["e640d2dc.ce6d2"],["873081eb.256dc"],["bbe481b5.6ddfb"],["dbfca5ce.757af8"],["ca7b8954.fcbe98"],["ab021baa.fed398"],["e5821f03.fa344"],["2b56ef14.a6f3f"],["3de6154e.7909ba"],["e720e6db.dde158"],["1ee2785c.772be8"],["c54e7fc1.0acc2"],["6f5de9ce.28a8e8"]]},{"id":"c50a7f97.fb913","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"1000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":359,"y":204,"wires":[["b59e983b.57e2c8"]]},{"id":"6d127308.ef2fec","type":"function","z":"6d373956.f4ba38","name":"","func":"node.warn('Retry to Read')\n// node.warn(global.get('deviceProfile_30_Index'))\n// node.warn(global.get('deviceProfile_30_ReadIndex'))\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":563,"y":119,"wires":[["2c365907.dca386"]]},{"id":"b59e983b.57e2c8","type":"function","z":"6d373956.f4ba38","name":"","func":"// node.warn('Move On Next Device')\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":561,"y":200,"wires":[["2c365907.dca386"]]},{"id":"3bbca3c7.248c8c","type":"switch","z":"6d373956.f4ba38","name":"Display Error","property":"display_Error","propertyType":"msg","rules":[{"t":"eq","v":"displayError","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":770,"y":60,"wires":[["827e3419.3613b8","4503d52.9f1c32c"]]},{"id":"827e3419.3613b8","type":"debug","z":"6d373956.f4ba38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":1010,"y":60,"wires":[]},{"id":"a18ba630.f14ea8","type":"function","z":"6d373956.f4ba38","name":"Error Frunction","func":"var timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\n\nvar displayError = (deviceProfile, deviceProfile_Index) => {\n    node.warn('displayError')\n    msg.display_Error = 'displayError';\n    let device_Profile = global.get(deviceProfile);\n    let index = global.get(deviceProfile_Index);\n    let profile = device_Profile[index];\n    \n    let data = null;\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": data,\n        \"TimeStamp\": dateTime,\n        \"Error\": 1,\n     }\n    }\n}  \n\nvar moveOnNextDevice = (\n            deviceProfile_StoreData,\n            deviceProfile,\n            stop_to_read_deviceProfile_dataPacket,\n            deviceProfile_Count,\n            deviceProfile_Index,\n            deviceProfile_ReadIndex,\n            stop_deviceProfile\n            ) => {\n    node.warn('moveOnNextDevice')\n    msg.error_Status = 'moveOnNextDevice';\n    global.set(deviceProfile_StoreData, []);\n    let device_profile = global.get(deviceProfile);\n    let number_of_device = device_profile.length;\n    \n    global.set(stop_to_read_deviceProfile_dataPacket, false);\n    let deviceCount =  global.get(deviceProfile_Count);\n    deviceCount += 1;\n    global.set(deviceProfile_Count, deviceCount);\n    \n    let index = global.get(deviceProfile_Index);\n    index += 1;\n    global.set(deviceProfile_Index, index);\n    global.set(deviceProfile_ReadIndex, 0);\n    \n    if(deviceCount == number_of_device){\n        node.warn('number_of_device If condition');\n        msg.error_Status = '';\n        global.set(deviceProfile_Count, null);\n        global.set(stop_deviceProfile, false);\n        global.set(stop_to_read_deviceProfile_dataPacket, false);\n    }\n}\n\nlet retryToRead = (\n        deviceProfile_Index,\n        deviceProfile_dataPacket_Count,\n        deviceProfile_errorCount,\n        deviceProfile_StoreData,\n        deviceProfile_ReadIndex,\n        deviceProfile,\n        stop_to_read_deviceProfile_dataPacket,\n        deviceProfile_Count,\n        stop_deviceProfile\n        )  => {\n        // let index = global.get(deviceProfile_Index);\n        \n        global.set(deviceProfile_dataPacket_Count, null);\n        \n        displayError(deviceProfile, deviceProfile_Index);\n            \n            // Calling MoveOnNextDevice Function\n            moveOnNextDevice(\n                deviceProfile_StoreData,\n                deviceProfile,\n                stop_to_read_deviceProfile_dataPacket,\n                deviceProfile_Count,\n                deviceProfile_Index,\n                deviceProfile_ReadIndex,\n                stop_deviceProfile\n            );\n        \n        \n        /*\n        let errorCount = global.get(deviceProfile_errorCount) || 0;\n        errorCount += 1;\n        node.warn(errorCount + ' errorCount')\n        global.set(deviceProfile_errorCount, errorCount);\n        \n        if(errorCount != 2){\n            node.warn('If Block')\n            global.set(deviceProfile_StoreData, []);\n            msg.error_Status = 'retry';\n            global.set(stop_to_read_deviceProfile_dataPacket, true);\n            global.set(deviceProfile_Index, index);\n            global.set(deviceProfile_ReadIndex, 0);   \n        }else {\n            node.warn('else')\n            displayError(deviceProfile, deviceProfile_Index);\n            global.set(deviceProfile_errorCount, null);\n            \n            // Calling MoveOnNextDevice Function\n            moveOnNextDevice(\n                deviceProfile_StoreData,\n                deviceProfile,\n                stop_to_read_deviceProfile_dataPacket,\n                deviceProfile_Count,\n                deviceProfile_Index,\n                deviceProfile_ReadIndex,\n                stop_deviceProfile\n            );\n        }*/\n    }\n\n\nlet deviceProfile_ErrorConfig = (number) => {\n        // For RetryToRead function Configration\n        let deviceProfile_Index = `deviceProfile_${number}_Index`;\n        let deviceProfile_dataPacket_Count = `deviceProfile_${number}_dataPacket_Count`;\n        let deviceProfile_errorCount = `deviceProfile_${number}_errorCount`;\n        let deviceProfile_StoreData = `deviceProfile_${number}_StoreData`;\n        let deviceProfile_ReadIndex = `deviceProfile_${number}_ReadIndex`;\n        \n        // For DisplayError function Configration\n        let deviceProfile = `deviceProfile_${number}`;\n        \n        // For MoveOnNextDevice function Configration\n        let stop_to_read_deviceProfile_dataPacket = `stop_to_read_deviceProfile_${number}_dataPacket`;\n        let deviceProfile_Count = `deviceProfile_${number}_Count`;\n        let stop_deviceProfile = `stop_deviceProfile_${number}`;\n        \n        // Calling RetryToRead\n        retryToRead(\n            deviceProfile_Index,\n            deviceProfile_dataPacket_Count,\n            deviceProfile_errorCount,\n            deviceProfile_StoreData,\n            deviceProfile_ReadIndex,\n            deviceProfile,\n            stop_to_read_deviceProfile_dataPacket,\n            deviceProfile_Count,\n            stop_deviceProfile\n        );\n}\n\n\nvar identity_Node_To_Pink_RetryOrMoveOnNextDevice = (number) => {\n         if(msg.error_Status == 'retry'){\n            msg.retry_or_moveOnNextDevice = `RD_Profile${number}`;\n        }\n        if(msg.error_Status == 'moveOnNextDevice'){\n            msg.retry_or_moveOnNextDevice = `RD_Profile${number}`;\n        }\n}\n\nif(msg.error.source.name == \"10.102.255.141\"){\n    if(msg.error.message == \"[object Object]\"){\n        \n    let slaveID = msg.payload.unitid;\n    //Inverter-1\n    if(slaveID == 3){\n        node.warn('Error Occur in INV-1');\n        deviceProfile_ErrorConfig(1);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(1);\n    }\n    //Meter-1\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-1');\n        deviceProfile_ErrorConfig(1);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(1);\n    }\n    //Meter-2\n    if(slaveID == 2){\n        node.warn('Error Occur in MET-2');\n        deviceProfile_ErrorConfig(1);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(1);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.102.255.144\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-2\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-2');\n        deviceProfile_ErrorConfig(2);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(2);\n    }\n    //Meter-3\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-3');\n        deviceProfile_ErrorConfig(2);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(2);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.102.255.146\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-3\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-3');\n        deviceProfile_ErrorConfig(3);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(3);\n    }\n    //Meter-4\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-4');\n        deviceProfile_ErrorConfig(3);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(3);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.102.255.148\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-4\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-4');\n        deviceProfile_ErrorConfig(4);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(4);\n    }\n    //Meter-5\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-5');\n        deviceProfile_ErrorConfig(4);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(4);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.102.255.150\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-5\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-5');\n        deviceProfile_ErrorConfig(5);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(5);\n    }\n    //Meter-6\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-6');\n        deviceProfile_ErrorConfig(5);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(5);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.102.255.152\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-6\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-6');\n        deviceProfile_ErrorConfig(6);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(6);\n    }\n    //Meter-7\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-7');\n        deviceProfile_ErrorConfig(6);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(6);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-7\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-7');\n        deviceProfile_ErrorConfig(7);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(7);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.145\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-8\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-8');\n        deviceProfile_ErrorConfig(8);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(8);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.143\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-9\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-9');\n        deviceProfile_ErrorConfig(9);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(9);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.144\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-10\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-10');\n        deviceProfile_ErrorConfig(10);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(10);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.141\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-11\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-11');\n        deviceProfile_ErrorConfig(11);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(11);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.105.255.142\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-12\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-12');\n        deviceProfile_ErrorConfig(12);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(12);\n    }\n    //Meter-8\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-8');\n        deviceProfile_ErrorConfig(12);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(12);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.117.127.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-13\n    if(slaveID == 3){\n        node.warn('Error Occur in INV-13');\n        deviceProfile_ErrorConfig(13);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(13);\n    }\n    \n    //Meter-9\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-9');\n        deviceProfile_ErrorConfig(13);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(13);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.117.127.141\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-14\n    if(slaveID == 1){\n        node.warn('Error Occur in INV-14');\n        deviceProfile_ErrorConfig(14);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(14);\n    }\n    \n    //Inverter-15\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-15');\n        deviceProfile_ErrorConfig(14);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(14);\n    }\n    \n    //Meter-10\n    if(slaveID == 3){\n        node.warn('Error Occur in MET-10');\n        deviceProfile_ErrorConfig(14);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(14);\n    }\n    \n    //Meter-11\n    if(slaveID == 4){\n        node.warn('Error Occur in MET-11');\n        deviceProfile_ErrorConfig(14);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(14);\n    }\n}\n}\n\n\nif(msg.error.source.name == \"10.109.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-16\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-16');\n        deviceProfile_ErrorConfig(15);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(15);\n    }\n    \n    //Meter-12\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-12');\n        deviceProfile_ErrorConfig(15);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(15);\n    }\n}\n}\n\n\nif(msg.error.source.name == \"10.72.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-17\n    if(slaveID == 2){\n        node.warn('Error Occur in INV-17');\n        deviceProfile_ErrorConfig(16);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(16);\n    }\n    \n    //Meter-13\n    if(slaveID == 1){\n        node.warn('Error Occur in MET-13');\n        deviceProfile_ErrorConfig(16);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(16);\n    }\n}\n}\n\n// New Device Config  \nif(msg.error.source.name == \"10.132.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-1\n    if(slaveID == 1){\n        node.warn('Error Occur in New Device INV-1');\n        deviceProfile_ErrorConfig(17);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(17);\n    }\n    \n    //Inverter-2\n    if(slaveID == 2){\n        node.warn('Error Occur in New Device INV-2');\n        deviceProfile_ErrorConfig(17);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(17);\n    }\n    \n    //Inverter-3\n    if(slaveID == 3){\n        node.warn('Error Occur in New Device INV-3');\n        deviceProfile_ErrorConfig(17);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(17);\n    }\n    \n    //Inverter-3\n    if(slaveID == 4){\n        node.warn('Error Occur in New Device NewMET-1');\n        deviceProfile_ErrorConfig(17);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(17);\n    }\n}\n}\n\n\nif(msg.error.source.name == \"10.112.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-4\n    if(slaveID == 2){\n        node.warn('Error Occur in New Device INV-4');\n        deviceProfile_ErrorConfig(18);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(18);\n    }\n    \n    // Meter-1\n    if(slaveID == 1){\n        node.warn('Error Occur in New Device MET-1');\n        deviceProfile_ErrorConfig(18);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(18);\n    }\n}\n}\n\n\nif(msg.error.source.name == \"10.26.255.140\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-5\n    if(slaveID == 2){\n        node.warn('Error Occur in New Device INV-5');\n        deviceProfile_ErrorConfig(19);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(19);\n    }\n    \n    // Meter-2\n    if(slaveID == 1){\n        node.warn('Error Occur in New Device MET-2');\n        deviceProfile_ErrorConfig(19);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(19);\n    }\n}\n}\n\nif(msg.error.source.name == \"10.26.255.141\"){\n    if(msg.error.message == \"[object Object]\"){\n    \n    let slaveID = msg.payload.unitid;\n    //Inverter-6\n    if(slaveID == 2){\n        node.warn('Error Occur in New Device INV-6');\n        deviceProfile_ErrorConfig(20);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(20);\n    }\n    \n    // Meter-3\n    if(slaveID == 1){\n        node.warn('Error Occur in New Device MET-3');\n        deviceProfile_ErrorConfig(20);\n        identity_Node_To_Pink_RetryOrMoveOnNextDevice(20);\n    }\n}\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":312,"y":83,"wires":[["8d6e0e16.015a5","3bbca3c7.248c8c"]]},{"id":"649ec4c.729573c","type":"debug","z":"6d373956.f4ba38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":310,"y":20,"wires":[]},{"id":"8f794051.e73a5","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-15","scope":["83cfbf84.e007"],"uncaught":false,"x":567,"y":3570,"wires":[["d581deb9.8cea5"]]},{"id":"d581deb9.8cea5","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_15_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3570,"wires":[["2b56ef14.a6f3f"]]},{"id":"ad350fef.ee438","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-16","scope":["4bac1edd.3c996"],"uncaught":false,"x":566,"y":3625,"wires":[["c6cc8f7d.29f82"]]},{"id":"c6cc8f7d.29f82","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_16_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":761,"y":3625,"wires":[["3de6154e.7909ba"]]},{"id":"f9b3ad24.9a7d4","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-15","scope":["83cfbf84.e007"],"uncaught":false,"x":609,"y":1364,"wires":[["23f14439.f9027c"]]},{"id":"23f14439.f9027c","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_15","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1364,"wires":[["2b56ef14.a6f3f"]]},{"id":"c8170024.e2f12","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-16","scope":["4bac1edd.3c996"],"uncaught":false,"x":609,"y":1416,"wires":[["6aa89b03.32ad14"]]},{"id":"6aa89b03.32ad14","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_16","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":1416,"wires":[["3de6154e.7909ba"]]},{"id":"2b56ef14.a6f3f","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-15","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n\n\nvar device_profile = global.get('deviceProfile_15');\nvar index = global.get('deviceProfile_15_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_15_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_15', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":984,"y":2467,"wires":[["180e3bad.8993f4"]]},{"id":"83cfbf84.e007","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-15","func":"var device_profile = global.get('deviceProfile_15');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_15_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_15_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_15_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_15_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_15_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-15')\n    // global.set('deviceProfile_15_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_15_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_15_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_15_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_15_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_15_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_15_ReadIndex', index);  \n  global.set('stop_deviceProfile_15', false);\n  global.set('stop_to_read_deviceProfile_15_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_15_dataPacket', false);\n    global.set('deviceProfile_15_ReadIndex', 0);\n    global.set(\"deviceProfile_15_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_15', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_15_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_15_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_15_Index');\n        index += 1;\n        global.set('deviceProfile_15_Index', index);\n        global.set('stop_deviceProfile_15', true);\n        global.set('stop_to_read_deviceProfile_15_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_15_dataPacket', false);\n        global.set('stop_deviceProfile_15', false);\n        global.set('deviceProfile_15_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1669.2857055664062,"y":2467.142852783203,"wires":[["5d02c3eb.da8b5c"]]},{"id":"5d02c3eb.da8b5c","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_15","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1882.2857055664062,"y":2467.5714416503906,"wires":[["848e60b5.0258f","4503d52.9f1c32c"]]},{"id":"848e60b5.0258f","type":"debug","z":"6d373956.f4ba38","name":"10.109.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2074.2857055664062,"y":2471.142852783203,"wires":[]},{"id":"4d6d992a.753f88","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1402.2857055664062,"y":2467.142852783203,"wires":[["83cfbf84.e007"]]},{"id":"83331496.1de0b8","type":"function","z":"6d373956.f4ba38","name":"Dp-15 INV-16, MET-12","func":"var deviceProfile_15 = [\n   {\n        deviceName: \"Inverter-16\",\n        deviceProfile: {\n            deviceNo: 16,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-12\",\n        deviceProfile: {\n            deviceNo: 12,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_15', deviceProfile_15);\nglobal.set('deviceProfile_15_Index', 0);\nglobal.set('deviceProfile_15_ReadIndex', 0);\nglobal.set('deviceProfile_15_StoreData', []);  \nglobal.set(\"deviceProfile_15_Count\", 0);\nglobal.set(\"deviceProfile_15_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":618.2857055664062,"y":2465.142852783203,"wires":[["2b56ef14.a6f3f"]]},{"id":"180e3bad.8993f4","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.109.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"7138c615.4c1ec8","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1206,"y":2472,"wires":[["4d6d992a.753f88"],[]]},{"id":"3de6154e.7909ba","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-16","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n// node.warn('1111111')\n\nvar device_profile = global.get('deviceProfile_16');\nvar index = global.get('deviceProfile_16_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_16_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_16', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":985,"y":2527,"wires":[["fa63da2c.e6d478"]]},{"id":"4bac1edd.3c996","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-16","func":"var device_profile = global.get('deviceProfile_16');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_16_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_16_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_16_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_16_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_16_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-16')\n    // global.set('deviceProfile_16_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_16_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_16_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_16_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_16_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_16_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_16_ReadIndex', index);  \n  global.set('stop_deviceProfile_16', false);\n  global.set('stop_to_read_deviceProfile_16_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_16_dataPacket', false);\n    global.set('deviceProfile_16_ReadIndex', 0);\n    global.set(\"deviceProfile_16_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_16', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_16_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_16_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_16_Index');\n        index += 1;\n        global.set('deviceProfile_16_Index', index);\n        global.set('stop_deviceProfile_16', true);\n        global.set('stop_to_read_deviceProfile_16_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_16_dataPacket', false);\n        global.set('stop_deviceProfile_16', false);\n        global.set('deviceProfile_16_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1670.2857055664062,"y":2527.142852783203,"wires":[["84258fe5.5b58f"]]},{"id":"84258fe5.5b58f","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_16","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1883.2857055664062,"y":2527.5714416503906,"wires":[["29c56dcd.6f70b2","4503d52.9f1c32c"]]},{"id":"29c56dcd.6f70b2","type":"debug","z":"6d373956.f4ba38","name":"10.72.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2075.2857055664062,"y":2531.142852783203,"wires":[]},{"id":"7c2789a4.125358","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1403.2857055664062,"y":2527.142852783203,"wires":[["4bac1edd.3c996"]]},{"id":"9034b98c.1cb958","type":"function","z":"6d373956.f4ba38","name":"Dp-16 INV-18, MET-13","func":"\nvar deviceProfile_16 = [\n   {\n        deviceName: \"Inverter-18\",\n        deviceProfile: {\n            deviceNo: 18,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-13\",\n        deviceProfile: {\n            deviceNo: 13,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_16', deviceProfile_16);\nglobal.set('deviceProfile_16_Index', 0);\nglobal.set('deviceProfile_16_ReadIndex', 0);\nglobal.set('deviceProfile_16_StoreData', []);  \nglobal.set(\"deviceProfile_16_Count\", 0);\nglobal.set(\"deviceProfile_16_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":619.2857055664062,"y":2526.142852783203,"wires":[["3de6154e.7909ba"]]},{"id":"fa63da2c.e6d478","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.72.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"baf2f3ea.9960d","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207,"y":2532,"wires":[["7c2789a4.125358"],[]]},{"id":"4fb52a4c.7544c4","type":"modbus-flex-connector","z":"6d373956.f4ba38","name":"Connector","maxReconnectsPerMinute":4,"emptyQueue":false,"showStatusActivities":true,"showErrors":false,"server":"56bb813b.8ce69","x":310,"y":275,"wires":[[]]},{"id":"e720e6db.dde158","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-17","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n// node.warn('1111111')\n\nvar device_profile = global.get('deviceProfile_17');\nvar index = global.get('deviceProfile_17_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_17_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_17', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":985,"y":2584,"wires":[["38e6a34d.3b482c"]]},{"id":"62770a80.df7444","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-17","func":"var device_profile = global.get('deviceProfile_17');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_17_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_17_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_17_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_17_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_17_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-14')\n    // global.set('deviceProfile_17_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_17_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n        \"DataLength\": data.length\n     }\n    }\n    global.set('deviceProfile_17_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_17_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_17_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_17_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_17_ReadIndex', index);  \n  global.set('stop_deviceProfile_17', false);\n  global.set('stop_to_read_deviceProfile_17_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_17_dataPacket', false);\n    global.set('deviceProfile_17_ReadIndex', 0);\n    global.set(\"deviceProfile_17_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_17', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_17_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_17_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_17_Index');\n        index += 1;\n        global.set('deviceProfile_17_Index', index);\n        global.set('stop_deviceProfile_17', true);\n        global.set('stop_to_read_deviceProfile_17_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_17_dataPacket', false);\n        global.set('stop_deviceProfile_17', false);\n        global.set('deviceProfile_17_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1670.2857055664062,"y":2584.142852783203,"wires":[["4110103.894ecf"]]},{"id":"4110103.894ecf","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_17","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1880.2857055664062,"y":2583.5714416503906,"wires":[["15e8aee8.0743f1","4503d52.9f1c32c"]]},{"id":"15e8aee8.0743f1","type":"debug","z":"6d373956.f4ba38","name":"10.132.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2075.2857055664062,"y":2588.142852783203,"wires":[]},{"id":"286b0c73.fcebc4","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1403.2857055664062,"y":2584.142852783203,"wires":[["62770a80.df7444"]]},{"id":"b6b7f716.b1de98","type":"function","z":"6d373956.f4ba38","name":"Dp-17 INV-1, INV-2, INV-3, MET-1","func":"var deviceProfile_17 = [\n  {\n        deviceName: \"Inverter-20\",\n        deviceProfile: {\n            deviceNo: 20,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 1,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Inverter-21\",\n        deviceProfile: {\n            deviceNo: 21,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Inverter-22\",\n        deviceProfile: {\n            deviceNo: 22,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 3,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n    {\n        deviceName: \"Meter-15\",\n        deviceProfile: {\n            deviceNo: 15,\n            deviceType: 180\n        },\n        read: {\n            slaveID: 4,\n        regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 3912,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3928,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3942,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3956,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3910,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3926,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3940,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3954,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3902,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3918,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3932,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3946,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3904,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3920,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3934,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3948,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3900,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3916,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3930,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3944,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3906,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3922,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3936,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3950,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3914,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3958,\n                        quantity: 16\n                    },\n                ]\n        }\n    }\n    ]\n\nglobal.set('deviceProfile_17', deviceProfile_17);\nglobal.set('deviceProfile_17_Index', 0);\nglobal.set('deviceProfile_17_ReadIndex', 0);\nglobal.set('deviceProfile_17_StoreData', []);  \nglobal.set(\"deviceProfile_17_Count\", 0);\nglobal.set(\"deviceProfile_17_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":659.2857055664062,"y":2583.142852783203,"wires":[["e720e6db.dde158"]]},{"id":"38e6a34d.3b482c","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.132.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"c895f449.f14b58","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207,"y":2589,"wires":[["286b0c73.fcebc4"],[]]},{"id":"80f8c41d.d2b5f8","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-17","scope":["62770a80.df7444"],"uncaught":false,"x":566,"y":3682,"wires":[["83d07c78.18bd9"]]},{"id":"83d07c78.18bd9","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_17_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":761,"y":3682,"wires":[["e720e6db.dde158"]]},{"id":"d3ab51a1.3425a","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-17","scope":["62770a80.df7444"],"uncaught":false,"x":610,"y":1473,"wires":[["e0823762.11e338"]]},{"id":"e0823762.11e338","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_17","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":765,"y":1473,"wires":[["e720e6db.dde158"]]},{"id":"1ee2785c.772be8","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-18","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n// node.warn('1111111')\n\nvar device_profile = global.get('deviceProfile_18');\nvar index = global.get('deviceProfile_18_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_18_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_18', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":985,"y":2643,"wires":[["456f61c0.bdfec"]]},{"id":"15b89ff.761856","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-18","func":"var device_profile = global.get('deviceProfile_18');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_18_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_18_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_18_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_18_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_18_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-16')\n    // global.set('deviceProfile_18_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_18_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_18_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_18_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_18_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_18_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_18_ReadIndex', index);  \n  global.set('stop_deviceProfile_18', false);\n  global.set('stop_to_read_deviceProfile_18_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_18_dataPacket', false);\n    global.set('deviceProfile_18_ReadIndex', 0);\n    global.set(\"deviceProfile_18_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_18', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_18_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_18_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_18_Index');\n        index += 1;\n        global.set('deviceProfile_18_Index', index);\n        global.set('stop_deviceProfile_18', true);\n        global.set('stop_to_read_deviceProfile_18_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_18_dataPacket', false);\n        global.set('stop_deviceProfile_18', false);\n        global.set('deviceProfile_18_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1670.2857055664062,"y":2643.142852783203,"wires":[["f7c92fd0.e9da2"]]},{"id":"f7c92fd0.e9da2","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_18","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1883.2857055664062,"y":2643.5714416503906,"wires":[["cad24678.b663f8","4503d52.9f1c32c"]]},{"id":"cad24678.b663f8","type":"debug","z":"6d373956.f4ba38","name":"10.112.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2075.2857055664062,"y":2647.142852783203,"wires":[]},{"id":"79447089.44cac","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1403.2857055664062,"y":2643.142852783203,"wires":[["15b89ff.761856"]]},{"id":"dc2af4df.9d0cf8","type":"function","z":"6d373956.f4ba38","name":"Dp-18 INV-4, MET-1","func":"var deviceProfile_18 = [\n   {\n        deviceName: \"Inverter-19\",\n        deviceProfile: {\n            deviceNo: 19,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n   {\n        deviceName: \"Meter-14\",\n        deviceProfile: {\n            deviceNo: 14,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_18', deviceProfile_18);\nglobal.set('deviceProfile_18_Index', 0);\nglobal.set('deviceProfile_18_ReadIndex', 0);\nglobal.set('deviceProfile_18_StoreData', []);  \nglobal.set(\"deviceProfile_18_Count\", 0);\nglobal.set(\"deviceProfile_18_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":619.2857055664062,"y":2642.142852783203,"wires":[["1ee2785c.772be8"]]},{"id":"456f61c0.bdfec","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.112.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"ee1870e0.7e7cf","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1207,"y":2648,"wires":[["79447089.44cac"],[]]},{"id":"bc4b324a.618c9","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-18","scope":["15b89ff.761856"],"uncaught":false,"x":567,"y":3738,"wires":[["f7716cce.028ee"]]},{"id":"f7716cce.028ee","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_18_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3738,"wires":[["1ee2785c.772be8"]]},{"id":"d89ce79b.f627c8","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-18","scope":["15b89ff.761856"],"uncaught":false,"x":611,"y":1523,"wires":[["fdba87a4.b07bd8"]]},{"id":"fdba87a4.b07bd8","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_18","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":766,"y":1523,"wires":[["1ee2785c.772be8"]]},{"id":"c54e7fc1.0acc2","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-19","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n// node.warn('1111111')\n\nvar device_profile = global.get('deviceProfile_19');\nvar index = global.get('deviceProfile_19_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_19_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_19', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":981,"y":2704,"wires":[["809c85df.431228"]]},{"id":"868f662.2fbb998","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-19","func":"var device_profile = global.get('deviceProfile_19');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_19_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_19_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_19_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_19_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_19_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-16')\n    // global.set('deviceProfile_19_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_19_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_19_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_19_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_19_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_19_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_19_ReadIndex', index);  \n  global.set('stop_deviceProfile_19', false);\n  global.set('stop_to_read_deviceProfile_19_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_19_dataPacket', false);\n    global.set('deviceProfile_19_ReadIndex', 0);\n    global.set(\"deviceProfile_19_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_19', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_19_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_19_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_19_Index');\n        index += 1;\n        global.set('deviceProfile_19_Index', index);\n        global.set('stop_deviceProfile_19', true);\n        global.set('stop_to_read_deviceProfile_19_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_19_dataPacket', false);\n        global.set('stop_deviceProfile_19', false);\n        global.set('deviceProfile_19_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1666.2857055664062,"y":2704.142852783203,"wires":[["ad04a2c0.97974"]]},{"id":"ad04a2c0.97974","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_19","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1879.2857055664062,"y":2704.5714416503906,"wires":[["8d8c0f5a.a3eec","4503d52.9f1c32c"]]},{"id":"cff542d5.62949","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1399.2857055664062,"y":2704.142852783203,"wires":[["868f662.2fbb998"]]},{"id":"a0082786.53e588","type":"function","z":"6d373956.f4ba38","name":"Dp-19 INV-5, MET-2","func":"var deviceProfile_19 = [\n   {\n        deviceName: \"Inverter-23\",\n        deviceProfile: {\n            deviceNo: 23,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n   {\n        deviceName: \"Meter-16\",\n        deviceProfile: {\n            deviceNo: 16,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_19', deviceProfile_19);\nglobal.set('deviceProfile_19_Index', 0);\nglobal.set('deviceProfile_19_ReadIndex', 0);\nglobal.set('deviceProfile_19_StoreData', []);  \nglobal.set(\"deviceProfile_19_Count\", 0);\nglobal.set(\"deviceProfile_19_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":600,"y":2700,"wires":[["c54e7fc1.0acc2"]]},{"id":"809c85df.431228","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.26.255.140","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"5ec156f1.3ac0e8","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1203,"y":2709,"wires":[["cff542d5.62949"],[]]},{"id":"8d8c0f5a.a3eec","type":"debug","z":"6d373956.f4ba38","name":"10.26.255.140","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2071.2857055664062,"y":2705.142852783203,"wires":[]},{"id":"c4b2c03.aaf524","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-19","scope":["868f662.2fbb998"],"uncaught":false,"x":567,"y":3792,"wires":[["3a54f577.ecd89a"]]},{"id":"3a54f577.ecd89a","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_19_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":762,"y":3792,"wires":[["c54e7fc1.0acc2"]]},{"id":"b6a3b701.c24728","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-19","scope":["868f662.2fbb998"],"uncaught":false,"x":611,"y":1577,"wires":[["3f321968.4b0866"]]},{"id":"3f321968.4b0866","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_19","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":766,"y":1577,"wires":[["c54e7fc1.0acc2"]]},{"id":"6f5de9ce.28a8e8","type":"function","z":"6d373956.f4ba38","name":"Read Device Profile-20","func":"var readData = (fc, slaveID, address, quantity) => {\n        msg.payload = {\n        'fc': fc,\n        'unitid': slaveID,\n        'address': address, \n        'quantity': quantity\n} \n}\n// node.warn('1111111')\n\nvar device_profile = global.get('deviceProfile_20');\nvar index = global.get('deviceProfile_20_Index');\nvar profile = device_profile[index];\n\nvar regAdd = profile.read.regAdd;\nvar readIndex = global.get('deviceProfile_20_ReadIndex');\nvar readValue = regAdd[readIndex];\n\nvar slaveID = profile.read.slaveID;\n// var slaveID = 2\nvar fc = readValue.fc;\nvar address = readValue.address;\nvar quantity = readValue.quantity;\n\nglobal.set('send_Data_deviceProfile_20', false);\nreadData(fc, slaveID, address, quantity);\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":980,"y":2762,"wires":[["a5cddcdf.dc61b"]]},{"id":"5f545a1f.17b0d4","type":"function","z":"6d373956.f4ba38","name":"Display data DeviceProfile-20","func":"var device_profile = global.get('deviceProfile_20');\nvar number_of_device = device_profile.length;\n\nvar index = global.get('deviceProfile_20_Index');\nvar profile = device_profile[index];\nvar regAdd =  profile.read.regAdd;\nvar number_Of_DataPacket = regAdd.length;\n\nglobal.set('stop_to_read_deviceProfile_20_dataPacket', false);\n\nvar dataPacket_Count =  global.get(\"deviceProfile_20_dataPacket_Count\") || 0;\n    dataPacket_Count += 1;\n    global.set('deviceProfile_20_dataPacket_Count', dataPacket_Count);\n\nvar timeStamp = () => {\n     let dateObj = new Date(),\n        month = '' + (dateObj.getMonth() + 1),\n        day = '' + dateObj.getDate(),\n        year = dateObj.getFullYear();\n\n    if (month.length < 2) \n        month = '0' + month;\n    if (day.length < 2) \n        day = '0' + day;\n  \n    let time = dateObj.toLocaleTimeString('en-IN', {timeZone: 'Asia/Kolkata', hour12: false });\n    let dateTime = `${year}-${month}-${day} ${time}`;\n    return dateTime;\n}\n\nvar displayData = () => {\n    // let errorCount = global.get('deviceProfile_20_errorCount');\n    // if(errorCount == 1){\n    // node.warn('Data read successfully After Retry DeviceProfile-16')\n    // global.set('deviceProfile_20_errorCount', null);\n    // }\n    \n    let data = [];\n    let getStoreData = global.get('deviceProfile_20_StoreData');\n    \n    getStoreData.forEach(item => {\n        item.forEach(value => {\n            data.push(value);\n        })\n    })\n    \n    let finalData = data.toString();\n    let deviceType = profile.deviceProfile.deviceType;\n    let deviceNo = profile.deviceProfile.deviceNo;\n    let dateTime = timeStamp();\n    \n    msg.payloadData = {\n     request: {\n        \"PlantID\": 172,\n        \"LoggerNo\": 1,\n        \"DeviceType\": deviceType,\n        \"DeviceNo\": deviceNo,\n        \"Data\": finalData,\n        \"TimeStamp\": dateTime,\n        \"Error\": 0,\n     }\n    }\n    global.set('deviceProfile_20_StoreData', []);\n}   \n\nvar storeData = () => {\n    // msg.payload = [1,2,3,4,5];\n    let getStoreData = global.get('deviceProfile_20_StoreData');\n    getStoreData.push(msg.payload);\n    global.set('deviceProfile_20_StoreData', getStoreData);\n}\n\nif(dataPacket_Count != number_Of_DataPacket){\n  // Storing Data  \n  storeData();\n  let index = global.get('deviceProfile_20_ReadIndex');\n  index += 1;  \n  global.set('deviceProfile_20_ReadIndex', index);  \n  global.set('stop_deviceProfile_20', false);\n  global.set('stop_to_read_deviceProfile_20_dataPacket', true);\n  \n}else {\n    // Storing Data  \n    storeData();\n    global.set('stop_to_read_deviceProfile_20_dataPacket', false);\n    global.set('deviceProfile_20_ReadIndex', 0);\n    global.set(\"deviceProfile_20_dataPacket_Count\", null);\n    global.set('send_Data_deviceProfile_20', true);\n    // display Data\n    displayData();\n\n    // Number of Device Loop\n    var deviceCount =  global.get(\"deviceProfile_20_Count\") \n    deviceCount += 1;\n    global.set('deviceProfile_20_Count', deviceCount);\n    \n    if(deviceCount != number_of_device ){\n        let index = global.get('deviceProfile_20_Index');\n        index += 1;\n        global.set('deviceProfile_20_Index', index);\n        global.set('stop_deviceProfile_20', true);\n        global.set('stop_to_read_deviceProfile_20_dataPacket', false);\n    }else {\n        global.set('stop_to_read_deviceProfile_20_dataPacket', false);\n        global.set('stop_deviceProfile_20', false);\n        global.set('deviceProfile_20_Count', null);\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1665.2857055664062,"y":2762.142852783203,"wires":[["9661114d.3b14"]]},{"id":"9661114d.3b14","type":"switch","z":"6d373956.f4ba38","name":"","property":"send_Data_deviceProfile_20","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1878.2857055664062,"y":2762.5714416503906,"wires":[["b38abc91.2b6f9","4503d52.9f1c32c"]]},{"id":"9424ceba.8f9dd","type":"delay","z":"6d373956.f4ba38","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1398.2857055664062,"y":2762.142852783203,"wires":[["5f545a1f.17b0d4"]]},{"id":"5e2860b9.7d543","type":"function","z":"6d373956.f4ba38","name":"Dp-20 INV-6, MET-3","func":"var deviceProfile_20 = [\n   {\n        deviceName: \"Inverter-24\",\n        deviceProfile: {\n            deviceNo: 24,\n            deviceType: 3\n        },\n        read: {\n            slaveID: 2,\n            regAdd: [\n                    // Start 16 bits\n                    {\n                        fc: 4,\n                        address: 5002,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5007,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5010,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5018,\n                        quantity: 6\n                    },\n                    {\n                        fc: 4,\n                        address: 5035,\n                        quantity: 3\n                    },\n                    {\n                        fc: 4,\n                        address: 5044,\n                        quantity: 1\n                    },\n                    {\n                        fc: 4,\n                        address: 5114,\n                        quantity: 10\n                    },\n                    {\n                        fc: 4,\n                        address: 5129,\n                        quantity: 8\n                    },\n                    // Start 32 bits\n                    {\n                        fc: 4,\n                        address: 5003,\n                        quantity: 4\n                    },\n                    {\n                        fc: 4,\n                        address: 5016,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 5030,\n                        quantity: 2\n                    },\n                    {\n                        fc: 4,\n                        address: 7012,\n                        quantity: 24\n                    },\n                    \n                ]\n        }\n    },\n   {\n        deviceName: \"Meter-17\",\n        deviceProfile: {\n            deviceNo: 17,\n            deviceType: 182\n        },\n        read: {\n            slaveID: 1,\n             regAdd: [\n                    // Start 32 bits\n                    {\n                        fc: 3,\n                        address: 2699,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 2999,\n                        quantity: 6\n                    },\n                    {\n                        fc: 3,\n                        address: 3009,\n                        quantity: 2\n                    },\n                    {\n                        fc: 3,\n                        address: 3059,\n                        quantity: 2\n                    }\n                ]\n        }\n    }\n    \n    ]\n\nglobal.set('deviceProfile_20', deviceProfile_20);\nglobal.set('deviceProfile_20_Index', 0);\nglobal.set('deviceProfile_20_ReadIndex', 0);\nglobal.set('deviceProfile_20_StoreData', []);  \nglobal.set(\"deviceProfile_20_Count\", 0);\nglobal.set(\"deviceProfile_20_dataPacket_Count\", null);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":614.2857055664062,"y":2761.142852783203,"wires":[["6f5de9ce.28a8e8"]]},{"id":"a5cddcdf.dc61b","type":"modbus-flex-getter","z":"6d373956.f4ba38","name":"10.26.255.141","showStatusActivities":true,"showErrors":true,"logIOActivities":false,"server":"5c64c5da.1f129c","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"x":1202,"y":2767,"wires":[["9424ceba.8f9dd"],[]]},{"id":"b38abc91.2b6f9","type":"debug","z":"6d373956.f4ba38","name":"10.26.255.141","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payloadData","targetType":"msg","statusVal":"","statusType":"auto","x":2070.2857055664062,"y":2763.142852783203,"wires":[]},{"id":"e748631.59665a","type":"complete","z":"6d373956.f4ba38","name":"Read Device Profile-20","scope":["5f545a1f.17b0d4"],"uncaught":false,"x":569,"y":3847,"wires":[["5c0af3c4.8d243c"]]},{"id":"5c0af3c4.8d243c","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_to_read_deviceProfile_20_dataPacket","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":764,"y":3847,"wires":[["6f5de9ce.28a8e8"]]},{"id":"1ccea5.c508215b","type":"complete","z":"6d373956.f4ba38","name":"Device Profile-20","scope":["5f545a1f.17b0d4"],"uncaught":false,"x":611,"y":1628,"wires":[["7456d451.0d379c"]]},{"id":"7456d451.0d379c","type":"switch","z":"6d373956.f4ba38","name":"","property":"stop_deviceProfile_20","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":766,"y":1628,"wires":[["6f5de9ce.28a8e8"]]},{"id":"7eaf9c16.4cca14","type":"catch","z":"6d373956.f4ba38","name":"","scope":null,"uncaught":false,"x":100,"y":440,"wires":[["cc8157ae.b27498"]]},{"id":"c95e8dcd.daf","type":"debug","z":"6d373956.f4ba38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":250,"y":620,"wires":[]},{"id":"cc8157ae.b27498","type":"function","z":"6d373956.f4ba38","name":"","func":"if(msg.error.message == \"Error: Client Not Ready To Read At State init\"){\n    msg.reConnector = true;\n}else{\n    msg.reConnector = false;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":100,"y":385,"wires":[["fc1aecb1.39169"]]},{"id":"fc1aecb1.39169","type":"switch","z":"6d373956.f4ba38","name":"","property":"msg.reConnector","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":90,"y":332,"wires":[["ee49a7bb.b229f8"]]},{"id":"ea92ecd.f44c51","type":"catch","z":"6d373956.f4ba38","name":"","scope":["38e6a34d.3b482c"],"uncaught":false,"x":145,"y":685,"wires":[["c95e8dcd.daf"]]},{"id":"ee49a7bb.b229f8","type":"function","z":"6d373956.f4ba38","name":"","func":"var reConnect = (IP, PORT) => {\n    node.warn('reConnect**********')\n    msg.payload = { \n    'connectorType': 'TCP', \n    'tcpHost': IP, \n    'unitId': 1\n    }\n}\n\nif(msg.error.message == \"Error: Client Not Ready To Read At State init\"){\n    // node.warn('Modbus Connecter ERROR Occur-1')\n    if(msg.error.source.name == \"10.102.255.141\"){\n        node.warn('Modbus Connecter ERROR Occur')\n        reConnect('10.102.255.141', '502');\n    }\n    \n    if(msg.error.source.name == \"10.102.255.144\"){\n        reConnect('10.102.255.144', '502');\n    }\n    \n    if(msg.error.source.name == \"10.102.255.146\"){\n        reConnect('10.102.255.146', '502');\n    }\n    \n    if(msg.error.source.name == \"10.102.255.148\"){\n        reConnect('10.102.255.148', '502');\n    }\n    \n    if(msg.error.source.name == \"10.102.255.150\"){\n        reConnect('10.102.255.150', '502');\n    }\n    \n    if(msg.error.source.name == \"10.102.255.152\"){\n        reConnect('10.102.255.152', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.140\"){\n        node.warn('10.105.255.140')\n        reConnect('10.105.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.145\"){\n        reConnect('10.105.255.145', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.143\"){\n        reConnect('10.105.255.143', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.144\"){\n    // node.warn('Error Occur in  10.105.255.144')\n        reConnect('10.105.255.144', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.141\"){\n    // node.warn('Error Occur in  10.105.255.141')\n        reConnect('10.105.255.141', '502');\n    }\n    \n    if(msg.error.source.name == \"10.105.255.142\"){\n    // node.warn('Error Occur in  10.105.255.142')\n        reConnect('10.105.255.142', '502');\n    }\n    \n    if(msg.error.source.name == \"10.117.127.140\"){\n        reConnect('10.117.127.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.117.127.141\"){\n        reConnect('10.117.127.141', '502');\n    }\n    \n    if(msg.error.source.name == \"10.109.255.140\"){\n        reConnect('10.109.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.72.255.140\"){\n        reConnect('10.72.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.132.255.140\"){\n        reConnect('10.132.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.112.255.140\"){\n        reConnect('10.112.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.26.255.140\"){\n        reConnect('10.26.255.140', '502');\n    }\n    \n    if(msg.error.source.name == \"10.26.255.141\"){\n        reConnect('10.26.255.141', '502');\n    }\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":100,"y":276,"wires":[["4fb52a4c.7544c4"]]},{"id":"fb8d06a3.53b6b8","type":"change","z":"6d373956.f4ba38","name":"","rules":[{"t":"set","p":"deviceType","pt":"msg","to":"payloadData.request.DeviceType","tot":"msg"},{"t":"set","p":"deviceNo","pt":"msg","to":"payloadData.request.DeviceNo","tot":"msg"},{"t":"set","p":"errFlag","pt":"msg","to":"payloadData.request.Error","tot":"msg"},{"t":"set","p":"timeStamp","pt":"msg","to":"payloadData.request.TimeStamp","tot":"msg"},{"t":"set","p":"data","pt":"msg","to":"payloadData.request.Data","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1920,"y":2840,"wires":[["4baa5419.e55c8c"]]},{"id":"4baa5419.e55c8c","type":"http request","z":"6d373956.f4ba38","name":"","method":"POST","ret":"txt","paytoqs":"ignore","url":"http://10.106.11.127/beta/rms/api/insertData?LD=1,172,{{{deviceType}}},{{{deviceNo}}},{{{errFlag}}},{{{timeStamp}}}&ID={{{data}}}","tls":"","persist":false,"proxy":"","authType":"","x":2111,"y":2840,"wires":[["87418c6f.45cc1"]]},{"id":"87418c6f.45cc1","type":"debug","z":"6d373956.f4ba38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":2013,"y":2884,"wires":[]},{"id":"538223ac.ea03cc","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.141","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"7b81d68a.ee2498","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.144","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"17d1c480.8c78bc","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.148","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"7e9a1c26.15d7d4","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.146","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"a94cac8.b3b775","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.150","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"3996929b.f7665e","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.102.255.152","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"a7a0bf29.9e5d3","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.105.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"7a5a15c9.5e947c","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.105.255.145","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"140c0f94.d98b1","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.105.255.143","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"e518cd16.b8a7f","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":true,"queueLogEnabled":false,"tcpHost":"10.105.255.144","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"f3b85fd.4f440a","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.105.255.141","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"8f1f6cca.e982f","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.105.255.142","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"45866b8b.fffea4","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.117.127.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"3ee03be9.b3d3a4","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.117.127.141","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"7138c615.4c1ec8","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.109.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"baf2f3ea.9960d","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":true,"queueLogEnabled":false,"tcpHost":"10.72.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"56bb813b.8ce69","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"{{{msg.payload.tcpHost}}}","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectOnTimeout":true,"reconnectTimeout":"2000","parallelUnitIdsAllowed":true},{"id":"c895f449.f14b58","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.132.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"500","reconnectOnTimeout":true,"reconnectTimeout":"700","parallelUnitIdsAllowed":true},{"id":"ee1870e0.7e7cf","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.112.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"5ec156f1.3ac0e8","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.26.255.140","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true},{"id":"5c64c5da.1f129c","type":"modbus-client","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"10.26.255.141","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"350","reconnectOnTimeout":true,"reconnectTimeout":"500","parallelUnitIdsAllowed":true}]